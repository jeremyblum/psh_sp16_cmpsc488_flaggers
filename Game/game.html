<!doctype html> 
<html lang="en"> 
<head> 
	<meta charset="UTF-8" />
    <title>Bot!Battle!</title>
    <script src="//cdn.jsdelivr.net/phaser/2.2.2/phaser.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>

<script type="text/javascript">

const tileWidth=32,tileHeight=32,gamePixelWidth=640,gamePixelHeight=480,gameTileWidth=gamePixelWidth/tileWidth,gameTileHeight=gamePixelHeight/tileHeight;

var game = new Phaser.Game(gamePixelWidth, gamePixelHeight, Phaser.AUTO, '', { preload: preload, create: create, update: update });
var player;

function preload() {

    game.load.image('star', 'assets/star.png');
    game.load.image('diamond', 'assets/diamond.png');
    game.load.spritesheet('tiles', 'assets/tiles.png', tileWidth, tileHeight);
	game.load.spritesheet('dude', 'assets/dude.png', 32, 48);

}

function create() {

	// Generate background tiles
    for(var y=0;y<game.width;y+=tileWidth){
		for(var x=0;x<game.width;x+=tileHeight){
			game.add.sprite(x, y, 'tiles', Math.floor(Math.random()*4));
		}
	}
	
	createOnTile(Math.floor(Math.random()*gameTileWidth),Math.floor(Math.random()*gameTileHeight),'star');
	createOnTile(Math.floor(Math.random()*gameTileWidth),Math.floor(Math.random()*gameTileHeight),'diamond');
	player=createOnTile(Math.floor(Math.random()*gameTileWidth),Math.floor(Math.random()*gameTileHeight),'dude');
	player.animations.add('left', [0, 1, 2, 3], 10, true);
    player.animations.add('right', [5, 6, 7, 8], 10, true);
	player.frame=4;
}

function update() {
	//player.x += 1;
}

function createOnTile(x,y,sprite){
	return game.add.sprite(x*tileWidth,y*tileHeight,sprite);
}

</script>

</body>
</html>